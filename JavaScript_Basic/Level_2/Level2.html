<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Level2.css">
    <script
    src="https://code.jquery.com/jquery-3.7.0.min.js"
    integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
    crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body>
    <!-- 내비게이션 바 -->
    <div class="inner">
        <div class="logo">logo</div>
        <nav role='navigation'>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Clients</a></li>
                <li><a href="#">Contact Us</a></li>
            </ul>
        </nav>  
    </div>
    <!-- 시간에 따라 사라지는 UI 박스 -->
    <div class="danger">
        <span class="count">5</span>초 이내 구매 시 사은품 증정!!
    </div>
    <form action="Success.html" class="form">
        <div>
            <input type="text" class="form-control" id="email">
        </div>
        <div>
            <input type="password" class="form-control" id="password">
        </div>
        <button type="submit" class="btn-primary" id="send">전송</button>
        <button type="button" class="btn-danger" id="close">닫기</button>
    </form>
    <!-- 캐러셀 만들기 -->
    <div style="overflow: hidden">
        <div class="slide-container">
            <div class="slide-box">
                <img src="car1.png">
            </div>
            <div class="slide-box">
                <img src="car2.png">
            </div>
            <div class="slide-box">
                <img src="car3.png">
            </div>
        </div>
    </div> 
    <div class="btn-slide">
        <button class="before">이전</button>

        <button id="slide-1" class="slide-btn" data-index="0">1</button>
        <button id="slide-2" class="slide-btn" data-index="1">2</button>
        <button id="slide-3" class="slide-btn" data-index="2">3</button>

        <button class="after">다음</button>

    </div>
    <div class="lorem" style=" height: 100px; overflow-y: scroll; 
    display: flex; justify-content: center; margin: 50px;">Lorem ipsum dolor sit amet consectetur adipisicing elit. 
        Assumenda eum ipsum, similique tempora autem pariatur, 
        ut molestiae iure sapiente repellat deleniti, 
        sed quasi incidunt sint ipsa quisquam repudiandae saepe animi.Lorem ipsum dolor sit amet consectetur adipisicing elit. 
        Assumenda eum ipsum, similique tempora autem pariatur, 
        ut molestiae iure sapiente repellat deleniti, 
        sed quasi incidunt sint ipsa quisquam repudiandae saepe animi.Lorem ipsum dolor sit amet consectetur adipisicing elit. 
        Assumenda eum ipsum, similique tempora autem pariatur, 
        ut molestiae iure sapiente repellat deleniti, 
        sed quasi incidunt sint ipsa quisquam repudiandae saepe animi.Lorem ipsum dolor sit amet consectetur adipisicing elit. 
        Assumenda eum ipsum, similique tempora autem pariatur, 
        ut molestiae iure sapiente repellat deleniti, 
        sed quasi incidunt sint ipsa quisquam repudiandae saepe animi.</div>
    <div style="height: 1000px; margin-top: 50px; border: 5px solid red"></div>
</body>
<script>
    
    // setTimeout을 이용한 타이머 기능
    // setTimeout(() => {
    //     $('.danger').hide();
    // }, 5000);

    // setInterval을 이용한 카운트다운 기능
    let count = document.querySelector('.count').innerHTML;
    setInterval(() => {
        if (count !== 1) {
            count = count - 1;
            document.querySelector('.count').innerHTML = count;
        } 
        else if (count === 1) {
            $('.danger').hide();
        } 
    }, 1000);

    // 정규표현식을 이용한 아이디 비번 형식 검사
    $('form').on('submit', (e)=>{
        let checkEmail = document.getElementById('email').value;
        let checkPassword = document.getElementById('password').value;
        if(checkEmail === '') {
            alert('아이디 입력 안하심 ㅅㄱ');
            e.preventDefault();
        }
        if (/\S+@\S+\.\S+/.test(checkEmail)) {
            alert('이메일 형식 아님 ㅅㄱ');
            e.preventDefault();
        }
        if (/[A-Z]/.test(checkPassword) === true) {
            alert('비번에 대문자 있노 ㅅㄱ');
            e.preventDefault();
        }
    })

    // 캐러셀 슬라이드 디폴트 세팅
    const slide = $('.slide-box');
    let currentSlide = 0;

    // 캐러셀 숫자별 이동 버튼 기능
    function ToSlide(e) {
        const index = (e.target.getAttribute('data-index'));
        currentSlide = index;
        let translate = -100 * currentSlide;
        $('.slide-container').css('transform', `translateX(${translate}vw)`);
        console.log('현재 슬라이드 ' + currentSlide);
    }
    //  넘버 버튼 클릭 시 캐러셀 이동
    let slideBtn = document.querySelectorAll('.slide-btn');
    slideBtn.forEach(btn => {
        btn.addEventListener('click', ToSlide);
    })
    
    // 캐러셀 이전, 다음 버튼 기능
    $('.after').on('click', ()=>{
        if (currentSlide < slide.length - 1) {
            currentSlide++;
            let translate = -100 * currentSlide;
            $('.slide-container').css('transform', `translateX(${translate}vw)`)
        }
        console.log('현재 슬라이드 ' + currentSlide)
    })
    $('.before').on('click', ()=>{
        if (0 < currentSlide) {
            currentSlide--;
            let translate = -100 * currentSlide;
            $('.slide-container').css('transform', `translateX(${translate}vw)`)
        }
        console.log('현재 슬라이드 ' + currentSlide)
    })

    // 스크롤 시 폰트 사이즈 변경
    window.addEventListener('scroll', ()=>{
        if (window.scrollY > 300) {
            $('.logo').css('font-size', '10px')
        } else {
            $('.logo').css('font-size', '40px')
        }
    })
    // div의 스크롤바 내린 양 + 눈에 보이는 div 높이 == div의 실제 높이
    document.querySelector('.lorem').addEventListener('scroll', ()=>{
        let scrollAmount = document.querySelector('.lorem').scrollTop; // 현재 페이지 스크롤양
        let Height = document.querySelector('.lorem').clientHeight; // 현재 웹페이지 보이는 높이
        let scrollHeight = document.querySelector('.lorem').scrollHeight;
        console.log(scrollAmount, Height, scrollHeight)
        if (scrollAmount + Height == scrollHeight) {
            alert('다 읽었노')
        }
    })
</script>
</html>